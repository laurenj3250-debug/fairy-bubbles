import * as React from "react";

/**
 * CrumpetSVGHD — higher-detail (64×64) SVG React sprite, grouped by color.
 * Renders far fewer nodes than per-pixel because horizontal runs are merged.
 *
 * Props:
 *  - pixelSize: number (default 12) — size of one sprite grid unit
 *  - background: string (default "transparent")
 *  - className: string (optional)
 *  - crisp: boolean (default true) — use crispEdges for sharp pixel look
 *  - dropShadow: boolean (default false) — add a subtle SVG shadow
 */
export default function CrumpetSVGHD({
  pixelSize = 12,
  background = "transparent",
  className = "",
  crisp = true,
  dropShadow = false,
  expression = "normal",
  showTail = true,
  tailWag = false,
  earTwitch = false,
}: {
  pixelSize?: number;
  background?: string;
  className?: string;
  crisp?: boolean;
  dropShadow?: boolean;
  expression?: "normal" | "happy" | "sleepy" | "excited" | "surprised";
  showTail?: boolean;
  tailWag?: boolean;
  earTwitch?: boolean;
}) {
  const W = 64;
  const H = 64;
  const GROUPS: { c: string; runs: Array<{x:number;y:number;w:number}>; }[] = [
    { c: "#251915", runs: [
    {x:40,y:10,w:1},
    {x:15,y:11,w:1},
    {x:19,y:11,w:1},
    {x:39,y:11,w:1},
    {x:43,y:11,w:1},
    {x:22,y:12,w:1},
    {x:35,y:13,w:1},
    {x:29,y:15,w:1},
    {x:38,y:16,w:1},
    {x:14,y:17,w:1},
    {x:46,y:18,w:1},
    {x:14,y:19,w:1},
    {x:46,y:19,w:1},
    {x:35,y:23,w:1},
    {x:47,y:24,w:1},
    {x:21,y:27,w:1},
    {x:11,y:28,w:1},
    {x:18,y:28,w:1},
    {x:35,y:28,w:2},
    {x:11,y:29,w:1},
    {x:20,y:29,w:1},
    {x:22,y:29,w:1},
    {x:35,y:29,w:2},
    {x:11,y:30,w:1},
    {x:36,y:30,w:1},
    {x:11,y:31,w:1},
    {x:36,y:31,w:1},
    {x:40,y:32,w:1},
    {x:9,y:34,w:1},
    {x:11,y:36,w:1},
    {x:44,y:37,w:1},
    {x:45,y:38,w:1},
    {x:44,y:39,w:1},
    {x:20,y:40,w:1},
    {x:53,y:40,w:1},
    {x:47,y:41,w:1},
    {x:20,y:42,w:1},
    {x:42,y:42,w:1},
    {x:46,y:42,w:1},
    {x:20,y:43,w:1},
    {x:41,y:43,w:1},
    {x:20,y:44,w:1},
    {x:52,y:44,w:2},
    {x:44,y:45,w:1},
    {x:50,y:45,w:1},
    {x:20,y:46,w:1},
    {x:44,y:46,w:1},
    {x:46,y:46,w:1},
    {x:20,y:48,w:1},
    {x:24,y:48,w:1},
    {x:24,y:49,w:1},
    {x:32,y:49,w:1},
    {x:25,y:50,w:1},
    {x:45,y:53,w:1},
    {x:17,y:55,w:1},
    {x:19,y:55,w:1},
    {x:19,y:56,w:1},
    {x:34,y:56,w:1},
    {x:32,y:57,w:2},
    {x:37,y:57,w:1}
  ] },
{ c: "#35271b", runs: [
    {x:20,y:11,w:2},
    {x:44,y:11,w:1},
    {x:14,y:13,w:1},
    {x:14,y:15,w:1},
    {x:28,y:15,w:1},
    {x:30,y:15,w:2},
    {x:33,y:15,w:1},
    {x:18,y:16,w:3},
    {x:46,y:21,w:1},
    {x:14,y:22,w:2},
    {x:33,y:22,w:1},
    {x:13,y:24,w:1},
    {x:34,y:27,w:1},
    {x:20,y:28,w:2},
    {x:33,y:28,w:1},
    {x:19,y:29,w:1},
    {x:48,y:29,w:1},
    {x:17,y:30,w:2},
    {x:22,y:30,w:1},
    {x:20,y:31,w:2},
    {x:14,y:32,w:1},
    {x:33,y:32,w:2},
    {x:41,y:32,w:2},
    {x:48,y:32,w:1},
    {x:13,y:33,w:1},
    {x:26,y:33,w:1},
    {x:25,y:35,w:1},
    {x:47,y:35,w:1},
    {x:12,y:36,w:1},
    {x:14,y:36,w:1},
    {x:23,y:36,w:1},
    {x:26,y:36,w:1},
    {x:43,y:39,w:1},
    {x:19,y:40,w:1},
    {x:40,y:40,w:1},
    {x:49,y:40,w:1},
    {x:22,y:41,w:1},
    {x:41,y:41,w:1},
    {x:54,y:42,w:1},
    {x:19,y:44,w:1},
    {x:20,y:45,w:1},
    {x:19,y:47,w:1},
    {x:45,y:47,w:1},
    {x:50,y:47,w:1},
    {x:45,y:48,w:1},
    {x:19,y:49,w:1},
    {x:45,y:49,w:1},
    {x:50,y:49,w:1},
    {x:50,y:50,w:1},
    {x:18,y:51,w:1},
    {x:21,y:51,w:1},
    {x:31,y:51,w:1},
    {x:50,y:51,w:1},
    {x:31,y:52,w:1},
    {x:45,y:52,w:1},
    {x:18,y:53,w:1},
    {x:25,y:53,w:1},
    {x:31,y:53,w:1},
    {x:17,y:54,w:1},
    {x:30,y:54,w:1},
    {x:37,y:54,w:1},
    {x:40,y:54,w:1},
    {x:47,y:55,w:1},
    {x:26,y:56,w:1},
    {x:29,y:56,w:1},
    {x:32,y:56,w:1},
    {x:22,y:57,w:2},
    {x:34,y:57,w:1},
    {x:38,y:57,w:1}
  ] },
{ c: "#4e331f", runs: [
    {x:16,y:10,w:1},
    {x:41,y:10,w:2},
    {x:38,y:11,w:1},
    {x:37,y:12,w:1},
    {x:45,y:12,w:1},
    {x:23,y:13,w:1},
    {x:45,y:13,w:1},
    {x:14,y:14,w:1},
    {x:24,y:14,w:1},
    {x:25,y:15,w:3},
    {x:32,y:15,w:1},
    {x:46,y:15,w:1},
    {x:14,y:16,w:1},
    {x:39,y:16,w:2},
    {x:46,y:16,w:1},
    {x:46,y:17,w:1},
    {x:17,y:19,w:2},
    {x:40,y:19,w:2},
    {x:14,y:20,w:1},
    {x:42,y:20,w:1},
    {x:46,y:20,w:1},
    {x:14,y:21,w:1},
    {x:19,y:22,w:3},
    {x:32,y:22,w:1},
    {x:46,y:22,w:1},
    {x:14,y:23,w:1},
    {x:18,y:23,w:1},
    {x:34,y:23,w:1},
    {x:46,y:23,w:1},
    {x:46,y:24,w:1},
    {x:13,y:25,w:1},
    {x:47,y:25,w:1},
    {x:13,y:26,w:1},
    {x:47,y:26,w:1},
    {x:13,y:27,w:1},
    {x:18,y:27,w:3},
    {x:32,y:27,w:1},
    {x:12,y:28,w:1},
    {x:17,y:28,w:1},
    {x:19,y:28,w:1},
    {x:22,y:28,w:1},
    {x:31,y:28,w:2},
    {x:34,y:28,w:1},
    {x:48,y:28,w:1},
    {x:12,y:29,w:1},
    {x:17,y:29,w:2},
    {x:31,y:29,w:3},
    {x:12,y:30,w:1},
    {x:19,y:30,w:3},
    {x:31,y:30,w:5},
    {x:48,y:30,w:1},
    {x:12,y:31,w:1},
    {x:17,y:31,w:1},
    {x:19,y:31,w:1},
    {x:22,y:31,w:1},
    {x:31,y:31,w:5},
    {x:10,y:32,w:4},
    {x:18,y:32,w:3},
    {x:24,y:32,w:1},
    {x:32,y:32,w:1},
    {x:43,y:32,w:3},
    {x:9,y:33,w:1},
    {x:24,y:33,w:1},
    {x:48,y:33,w:1},
    {x:25,y:34,w:1},
    {x:13,y:35,w:1},
    {x:30,y:35,w:1},
    {x:13,y:36,w:1},
    {x:25,y:36,w:1},
    {x:27,y:36,w:1},
    {x:29,y:36,w:1},
    {x:40,y:36,w:3},
    {x:47,y:36,w:1},
    {x:10,y:37,w:1},
    {x:14,y:37,w:1},
    {x:46,y:37,w:1},
    {x:15,y:38,w:1},
    {x:16,y:39,w:2},
    {x:42,y:39,w:1},
    {x:18,y:40,w:1},
    {x:41,y:40,w:1},
    {x:48,y:40,w:1},
    {x:50,y:40,w:3},
    {x:21,y:41,w:1},
    {x:23,y:41,w:1},
    {x:38,y:41,w:2},
    {x:54,y:41,w:1},
    {x:19,y:42,w:1},
    {x:41,y:42,w:1},
    {x:19,y:43,w:1},
    {x:42,y:43,w:1},
    {x:46,y:43,w:1},
    {x:54,y:43,w:1},
    {x:46,y:44,w:1},
    {x:19,y:45,w:1},
    {x:42,y:45,w:2},
    {x:46,y:45,w:1},
    {x:51,y:45,w:1},
    {x:19,y:46,w:1},
    {x:43,y:46,w:1},
    {x:50,y:46,w:1},
    {x:44,y:47,w:1},
    {x:46,y:47,w:1},
    {x:19,y:48,w:1},
    {x:39,y:48,w:1},
    {x:46,y:48,w:1},
    {x:50,y:48,w:1},
    {x:20,y:49,w:1},
    {x:18,y:50,w:1},
    {x:21,y:50,w:1},
    {x:31,y:50,w:1},
    {x:39,y:50,w:1},
    {x:45,y:50,w:1},
    {x:25,y:51,w:1},
    {x:39,y:51,w:1},
    {x:45,y:51,w:1},
    {x:18,y:52,w:1},
    {x:21,y:52,w:1},
    {x:25,y:52,w:1},
    {x:50,y:52,w:1},
    {x:21,y:53,w:1},
    {x:38,y:53,w:1},
    {x:49,y:53,w:1},
    {x:21,y:54,w:1},
    {x:26,y:54,w:1},
    {x:38,y:54,w:2},
    {x:48,y:54,w:1},
    {x:20,y:55,w:1},
    {x:26,y:55,w:1},
    {x:30,y:55,w:1},
    {x:37,y:55,w:1},
    {x:45,y:55,w:2},
    {x:17,y:56,w:2},
    {x:20,y:56,w:1},
    {x:22,y:56,w:1},
    {x:24,y:56,w:1},
    {x:27,y:56,w:2},
    {x:30,y:56,w:1},
    {x:37,y:56,w:1},
    {x:39,y:56,w:1},
    {x:41,y:56,w:1},
    {x:44,y:56,w:1},
    {x:20,y:57,w:2},
    {x:24,y:57,w:1},
    {x:31,y:57,w:1},
    {x:35,y:57,w:2},
    {x:40,y:57,w:3}
  ] },
{ c: "#644325", runs: [
    {x:17,y:10,w:2},
    {x:15,y:12,w:1},
    {x:36,y:13,w:1},
    {x:34,y:14,w:1},
    {x:46,y:14,w:1},
    {x:14,y:18,w:1},
    {x:33,y:27,w:1},
    {x:47,y:27,w:1},
    {x:18,y:31,w:1},
    {x:48,y:31,w:1},
    {x:21,y:32,w:1},
    {x:46,y:32,w:1},
    {x:13,y:34,w:1},
    {x:22,y:35,w:1},
    {x:24,y:36,w:1},
    {x:28,y:36,w:1},
    {x:43,y:37,w:1},
    {x:37,y:41,w:1},
    {x:42,y:44,w:1},
    {x:20,y:47,w:1},
    {x:43,y:47,w:1},
    {x:32,y:48,w:1},
    {x:39,y:49,w:1},
    {x:46,y:49,w:1},
    {x:38,y:52,w:1},
    {x:45,y:54,w:1},
    {x:43,y:55,w:2},
    {x:43,y:56,w:1},
    {x:19,y:57,w:1},
    {x:25,y:57,w:1},
    {x:39,y:57,w:1}
  ] },
{ c: "#963c18", runs: [
    {x:16,y:17,w:1}
  ] },
{ c: "#af5a1a", runs: [
    {x:17,y:13,w:1},
    {x:40,y:13,w:2},
    {x:16,y:14,w:1},
    {x:18,y:14,w:1},
    {x:39,y:14,w:1},
    {x:42,y:14,w:1},
    {x:19,y:15,w:2},
    {x:42,y:15,w:1},
    {x:16,y:16,w:1},
    {x:16,y:18,w:1},
    {x:13,y:29,w:1},
    {x:13,y:30,w:1},
    {x:47,y:34,w:1},
    {x:21,y:44,w:1},
    {x:21,y:45,w:1},
    {x:21,y:48,w:1},
    {x:27,y:55,w:1}
  ] },
{ c: "#d77119", runs: [
    {x:16,y:13,w:1},
    {x:17,y:14,w:1},
    {x:40,y:14,w:2},
    {x:16,y:15,w:2},
    {x:34,y:15,w:1},
    {x:38,y:15,w:2},
    {x:41,y:15,w:1},
    {x:17,y:16,w:1},
    {x:33,y:16,w:1},
    {x:41,y:16,w:2},
    {x:17,y:17,w:2},
    {x:25,y:17,w:1},
    {x:27,y:17,w:2},
    {x:41,y:17,w:2},
    {x:18,y:18,w:1},
    {x:27,y:18,w:1},
    {x:42,y:18,w:1},
    {x:16,y:19,w:1},
    {x:31,y:19,w:1},
    {x:42,y:19,w:1},
    {x:16,y:20,w:1},
    {x:44,y:21,w:1},
    {x:14,y:24,w:1},
    {x:13,y:28,w:1},
    {x:45,y:29,w:1},
    {x:13,y:31,w:1},
    {x:25,y:33,w:1},
    {x:14,y:35,w:1},
    {x:46,y:35,w:1},
    {x:15,y:36,w:1},
    {x:43,y:36,w:2},
    {x:16,y:37,w:1},
    {x:16,y:38,w:2},
    {x:35,y:41,w:1},
    {x:40,y:41,w:1},
    {x:48,y:41,w:1},
    {x:21,y:42,w:1},
    {x:21,y:43,w:2},
    {x:37,y:43,w:1},
    {x:48,y:43,w:1},
    {x:41,y:49,w:1},
    {x:20,y:50,w:1},
    {x:28,y:50,w:1},
    {x:28,y:51,w:1},
    {x:22,y:52,w:1},
    {x:34,y:52,w:2},
    {x:43,y:52,w:1},
    {x:19,y:53,w:2},
    {x:22,y:53,w:1},
    {x:26,y:53,w:3},
    {x:30,y:53,w:1},
    {x:25,y:54,w:1},
    {x:28,y:54,w:2},
    {x:46,y:54,w:2},
    {x:29,y:55,w:1}
  ] },
{ c: "#dd7b42", runs: [
    {x:17,y:18,w:1}
  ] },
{ c: "#dfa559", runs: [
    {x:18,y:15,w:1},
    {x:41,y:18,w:1},
    {x:30,y:34,w:1},
    {x:29,y:35,w:1},
    {x:26,y:57,w:1},
    {x:43,y:57,w:2}
  ] },
{ c: "#dfba88", runs: [
    {x:46,y:56,w:1},
    {x:18,y:57,w:1},
    {x:27,y:57,w:2},
    {x:30,y:57,w:1}
  ] },
{ c: "#ed8813", runs: [
    {x:24,y:16,w:2},
    {x:24,y:17,w:1},
    {x:31,y:17,w:1},
    {x:28,y:18,w:1},
    {x:32,y:18,w:1},
    {x:44,y:18,w:1},
    {x:15,y:19,w:1},
    {x:23,y:19,w:1},
    {x:44,y:19,w:1},
    {x:27,y:20,w:1},
    {x:43,y:20,w:1},
    {x:30,y:21,w:1},
    {x:43,y:21,w:1},
    {x:26,y:22,w:1},
    {x:46,y:25,w:1},
    {x:41,y:28,w:1},
    {x:40,y:29,w:5},
    {x:46,y:30,w:2},
    {x:46,y:31,w:1},
    {x:47,y:32,w:1},
    {x:47,y:33,w:1},
    {x:15,y:34,w:1},
    {x:45,y:35,w:1},
    {x:38,y:38,w:1},
    {x:18,y:39,w:2},
    {x:21,y:39,w:1},
    {x:23,y:39,w:1},
    {x:37,y:39,w:1},
    {x:21,y:40,w:1},
    {x:35,y:40,w:1},
    {x:24,y:41,w:1},
    {x:32,y:41,w:1},
    {x:36,y:41,w:1},
    {x:32,y:42,w:1},
    {x:37,y:42,w:1},
    {x:48,y:42,w:2},
    {x:51,y:42,w:2},
    {x:32,y:43,w:1},
    {x:47,y:43,w:1},
    {x:50,y:44,w:1},
    {x:41,y:45,w:1},
    {x:42,y:46,w:1},
    {x:39,y:47,w:2},
    {x:48,y:47,w:1},
    {x:23,y:48,w:1},
    {x:33,y:48,w:1},
    {x:35,y:48,w:1},
    {x:35,y:49,w:1},
    {x:49,y:49,w:1},
    {x:24,y:50,w:1},
    {x:26,y:50,w:1},
    {x:32,y:50,w:1},
    {x:41,y:50,w:1},
    {x:43,y:50,w:1},
    {x:20,y:51,w:1},
    {x:40,y:51,w:1},
    {x:28,y:52,w:1},
    {x:32,y:52,w:2},
    {x:37,y:52,w:1},
    {x:47,y:52,w:1},
    {x:23,y:53,w:1},
    {x:29,y:53,w:1},
    {x:32,y:53,w:3},
    {x:41,y:53,w:1},
    {x:46,y:53,w:1},
    {x:18,y:54,w:1}
  ] },
{ c: "#f09717", runs: [
    {x:15,y:13,w:1},
    {x:20,y:14,w:1},
    {x:29,y:16,w:1},
    {x:43,y:16,w:2},
    {x:23,y:17,w:1},
    {x:44,y:17,w:1},
    {x:20,y:18,w:1},
    {x:24,y:18,w:1},
    {x:29,y:18,w:1},
    {x:31,y:18,w:1},
    {x:26,y:19,w:3},
    {x:30,y:19,w:1},
    {x:15,y:20,w:1},
    {x:24,y:20,w:1},
    {x:28,y:20,w:1},
    {x:31,y:20,w:1},
    {x:41,y:20,w:1},
    {x:42,y:21,w:1},
    {x:46,y:27,w:1},
    {x:43,y:28,w:1},
    {x:46,y:28,w:2},
    {x:15,y:29,w:1},
    {x:46,y:29,w:1},
    {x:14,y:30,w:2},
    {x:39,y:30,w:4},
    {x:15,y:33,w:1},
    {x:38,y:34,w:1},
    {x:43,y:34,w:1},
    {x:46,y:34,w:1},
    {x:46,y:36,w:1},
    {x:18,y:38,w:1},
    {x:36,y:39,w:1},
    {x:38,y:39,w:1},
    {x:22,y:40,w:1},
    {x:26,y:40,w:1},
    {x:30,y:40,w:1},
    {x:33,y:40,w:1},
    {x:36,y:40,w:2},
    {x:25,y:41,w:1},
    {x:29,y:41,w:1},
    {x:31,y:41,w:1},
    {x:33,y:41,w:1},
    {x:51,y:41,w:1},
    {x:30,y:42,w:1},
    {x:24,y:43,w:1},
    {x:28,y:43,w:3},
    {x:38,y:43,w:2},
    {x:50,y:43,w:1},
    {x:52,y:43,w:1},
    {x:23,y:44,w:1},
    {x:48,y:44,w:2},
    {x:51,y:44,w:1},
    {x:21,y:46,w:1},
    {x:39,y:46,w:2},
    {x:21,y:47,w:1},
    {x:38,y:47,w:1},
    {x:36,y:48,w:2},
    {x:48,y:48,w:2},
    {x:31,y:49,w:1},
    {x:36,y:49,w:1},
    {x:48,y:49,w:1},
    {x:19,y:50,w:1},
    {x:22,y:50,w:1},
    {x:46,y:50,w:1},
    {x:49,y:50,w:1},
    {x:19,y:51,w:1},
    {x:22,y:51,w:1},
    {x:24,y:51,w:1},
    {x:26,y:51,w:1},
    {x:42,y:51,w:1},
    {x:23,y:52,w:1},
    {x:27,y:52,w:1},
    {x:36,y:52,w:1},
    {x:39,y:52,w:1},
    {x:36,y:53,w:1},
    {x:39,y:53,w:1},
    {x:47,y:53,w:2},
    {x:19,y:54,w:1},
    {x:18,y:55,w:1},
    {x:21,y:55,w:1},
    {x:23,y:56,w:1}
  ] },
{ c: "#f4a618", runs: [
    {x:39,y:13,w:1},
    {x:15,y:16,w:1},
    {x:31,y:16,w:1},
    {x:19,y:17,w:1},
    {x:37,y:17,w:1},
    {x:20,y:18,w:1},
    {x:36,y:18,w:1},
    {x:22,y:19,w:1},
    {x:34,y:19,w:1},
    {x:23,y:20,w:1},
    {x:33,y:20,w:1},
    {x:24,y:21,w:2},
    {x:32,y:21,w:2},
    {x:26,y:22,w:2},
    {x:30,y:22,w:2},
    {x:27,y:23,w:6},
    {x:28,y:24,w:4},
    {x:29,y:25,w:2}
  ]},
{ c: "#f4a621", runs: [
    {x:28,y:12,w:1},
    {x:30,y:12,w:1},
    {x:33,y:12,w:1},
    {x:26,y:13,w:1},
    {x:31,y:13,w:1},
    {x:34,y:13,w:1},
    {x:28,y:14,w:1},
    {x:30,y:14,w:1},
    {x:33,y:14,w:1},
    {x:26,y:15,w:1},
    {x:31,y:15,w:1},
    {x:34,y:15,w:1},
    {x:25,y:16,w:2},
    {x:32,y:16,w:2},
    {x:24,y:17,w:3},
    {x:32,y:17,w:3},
    {x:24,y:18,w:3},
    {x:32,y:18,w:3},
    {x:24,y:19,w:3},
    {x:32,y:19,w:3},
    {x:24,y:20,w:3},
    {x:32,y:20,w:3},
    {x:25,y:21,w:2},
    {x:33,y:21,w:2},
    {x:26,y:22,w:2},
    {x:30,y:22,w:2},
    {x:28,y:23,w:4}
  ]},
{ c: "#f8ddb4", runs: [
    {x:18,y:35,w:1},
    {x:44,y:35,w:1},
    {x:15,y:36,w:3},
    {x:44,y:36,w:3},
    {x:14,y:37,w:4},
    {x:46,y:37,w:4},
    {x:13,y:38,w:5},
    {x:46,y:38,w:5},
    {x:12,y:39,w:6},
    {x:46,y:39,w:6},
    {x:12,y:40,w:6},
    {x:46,y:40,w:6},
    {x:12,y:41,w:6},
    {x:46,y:41,w:6},
    {x:13,y:42,w:5},
    {x:45,y:42,w:6},
    {x:13,y:43,w:5},
    {x:45,y:43,w:6},
    {x:14,y:44,w:4},
    {x:44,y:44,w:7},
    {x:15,y:45,w:3},
    {x:44,y:45,w:6},
    {x:16,y:46,w:3},
    {x:43,y:46,w:6},
    {x:16,y:47,w:3},
    {x:43,y:47,w:6},
    {x:17,y:48,w:3},
    {x:42,y:48,w:6},
    {x:18,y:49,w:3},
    {x:41,y:49,w:6},
    {x:19,y:50,w:3},
    {x:41,y:50,w:5},
    {x:20,y:51,w:3},
    {x:40,y:51,w:5}
  ]},
{ c: "#f8e3c4", runs: [
    {x:19,y:34,w:1},
    {x:43,y:34,w:1},
    {x:14,y:35,w:4},
    {x:46,y:35,w:4},
    {x:13,y:36,w:5},
    {x:47,y:36,w:5},
    {x:12,y:37,w:6},
    {x:47,y:37,w:6},
    {x:12,y:38,w:6},
    {x:47,y:38,w:6},
    {x:12,y:39,w:6},
    {x:47,y:39,w:6},
    {x:12,y:40,w:6},
    {x:47,y:40,w:6},
    {x:12,y:41,w:6},
    {x:47,y:41,w:6},
    {x:12,y:42,w:6},
    {x:46,y:42,w:7},
    {x:12,y:43,w:6},
    {x:46,y:43,w:7},
    {x:13,y:44,w:5},
    {x:46,y:44,w:6},
    {x:14,y:45,w:4},
    {x:45,y:45,w:6},
    {x:15,y:46,w:4},
    {x:45,y:46,w:5},
    {x:15,y:47,w:4},
    {x:45,y:47,w:5},
    {x:16,y:48,w:4},
    {x:44,y:48,w:5},
    {x:17,y:49,w:4},
    {x:44,y:49,w:4},
    {x:18,y:50,w:4},
    {x:43,y:50,w:4},
    {x:19,y:51,w:4},
    {x:43,y:51,w:3}
  ]},
{ c: "#f9e1ba", runs: [
    {x:20,y:33,w:1},
    {x:42,y:33,w:1},
    {x:15,y:34,w:4},
    {x:45,y:34,w:4},
    {x:14,y:35,w:5},
    {x:46,y:35,w:5},
    {x:13,y:36,w:6},
    {x:47,y:36,w:6},
    {x:13,y:37,w:6},
    {x:47,y:37,w:6},
    {x:13,y:38,w:6},
    {x:47,y:38,w:6},
    {x:13,y:39,w:6},
    {x:47,y:39,w:6},
    {x:13,y:40,w:6},
    {x:47,y:40,w:6},
    {x:13,y:41,w:6},
    {x:47,y:41,w:6},
    {x:13,y:42,w:6},
    {x:46,y:42,w:7},
    {x:13,y:43,w:6},
    {x:46,y:43,w:7},
    {x:14,y:44,w:5},
    {x:46,y:44,w:6},
    {x:15,y:45,w:4},
    {x:45,y:45,w:6},
    {x:16,y:46,w:4},
    {x:45,y:46,w:5},
    {x:16,y:47,w:4},
    {x:45,y:47,w:5},
    {x:17,y:48,w:4},
    {x:44,y:48,w:5},
    {x:18,y:49,w:4},
    {x:44,y:49,w:4},
    {x:19,y:50,w:4},
    {x:43,y:50,w:4},
    {x:20,y:51,w:4},
    {x:43,y:51,w:3}
  ]},
{ c: "#fade90", runs: [
    {x:26,y:31,w:1},
    {x:36,y:31,w:1},
    {x:21,y:32,w:4},
    {x:39,y:32,w:4},
    {x:17,y:33,w:6},
    {x:41,y:33,w:6},
    {x:15,y:34,w:7},
    {x:42,y:34,w:7},
    {x:14,y:35,w:7},
    {x:43,y:35,w:7},
    {x:14,y:36,w:7},
    {x:43,y:36,w:7},
    {x:14,y:37,w:7},
    {x:43,y:37,w:7},
    {x:14,y:38,w:7},
    {x:43,y:38,w:7},
    {x:14,y:39,w:7},
    {x:43,y:39,w:7},
    {x:14,y:40,w:7},
    {x:43,y:40,w:7},
    {x:14,y:41,w:7},
    {x:43,y:41,w:7},
    {x:14,y:42,w:7},
    {x:43,y:42,w:7},
    {x:15,y:43,w:6},
    {x:43,y:43,w:6},
    {x:16,y:44,w:5},
    {x:42,y:44,w:5},
    {x:17,y:45,w:5},
    {x:41,y:45,w:5},
    {x:18,y:46,w:4},
    {x:41,y:46,w:4},
    {x:19,y:47,w:4},
    {x:40,y:47,w:4},
    {x:20,y:48,w:4},
    {x:39,y:48,w:4},
    {x:21,y:49,w:4},
    {x:38,y:49,w:4},
    {x:22,y:50,w:4},
    {x:37,y:50,w:4},
    {x:23,y:51,w:4},
    {x:36,y:51,w:4}
  ]},
{ c: "#fbb82b", runs: [
    {x:17,y:24,w:1},
    {x:39,y:24,w:1},
    {x:15,y:25,w:2},
    {x:39,y:25,w:2},
    {x:14,y:26,w:3},
    {x:39,y:26,w:3},
    {x:14,y:27,w:3},
    {x:39,y:27,w:3},
    {x:14,y:28,w:3},
    {x:39,y:28,w:3},
    {x:14,y:29,w:3},
    {x:39,y:29,w:3},
    {x:14,y:30,w:3},
    {x:39,y:30,w:3},
    {x:14,y:31,w:3},
    {x:39,y:31,w:3},
    {x:14,y:32,w:3},
    {x:39,y:32,w:3},
    {x:14,y:33,w:3},
    {x:39,y:33,w:3}
  ]},
{ c: "#fbf1d7", runs: [
    {x:13,y:36,w:1},
    {x:48,y:36,w:1},
    {x:12,y:37,w:2},
    {x:48,y:37,w:2},
    {x:12,y:38,w:2},
    {x:48,y:38,w:2},
    {x:12,y:39,w:2},
    {x:48,y:39,w:2},
    {x:12,y:40,w:2},
    {x:48,y:40,w:2},
    {x:12,y:41,w:2},
    {x:48,y:41,w:2}
  ]},
{ c: "#fcc436", runs: [
    {x:13,y:22,w:1},
    {x:44,y:22,w:1},
    {x:11,y:23,w:2},
    {x:45,y:23,w:2},
    {x:10,y:24,w:3},
    {x:46,y:24,w:3},
    {x:10,y:25,w:3},
    {x:46,y:25,w:3},
    {x:10,y:26,w:3},
    {x:46,y:26,w:3},
    {x:10,y:27,w:3},
    {x:46,y:27,w:3},
    {x:10,y:28,w:3},
    {x:46,y:28,w:3},
    {x:10,y:29,w:3},
    {x:46,y:29,w:3},
    {x:10,y:30,w:3},
    {x:46,y:30,w:3},
    {x:10,y:31,w:3},
    {x:46,y:31,w:3}
  ]},
{ c: "#fcd129", runs: [
    {x:7,y:21,w:3},
    {x:52,y:21,w:3},
    {x:7,y:22,w:3},
    {x:52,y:22,w:3},
    {x:7,y:23,w:3},
    {x:52,y:23,w:3},
    {x:7,y:24,w:3},
    {x:52,y:24,w:3},
    {x:7,y:25,w:3},
    {x:52,y:25,w:3},
    {x:7,y:26,w:3},
    {x:52,y:26,w:3},
    {x:7,y:27,w:3},
    {x:52,y:27,w:3},
    {x:7,y:28,w:3},
    {x:52,y:28,w:3},
    {x:7,y:29,w:3},
    {x:52,y:29,w:3}
  ]},
{ c: "#fdca47", runs: [
    {x:9,y:19,w:2},
    {x:53,y:19,w:2},
    {x:8,y:20,w:2},
    {x:54,y:20,w:2},
    {x:7,y:21,w:2},
    {x:55,y:21,w:2},
    {x:7,y:22,w:2},
    {x:55,y:22,w:2},
    {x:7,y:23,w:2},
    {x:55,y:23,w:2},
    {x:7,y:24,w:2},
    {x:55,y:24,w:2},
    {x:7,y:25,w:2},
    {x:55,y:25,w:2},
    {x:7,y:26,w:2},
    {x:55,y:26,w:2}
  ]},
{ c: "#fdd660", runs: [
    {x:7,y:18,w:1},
    {x:56,y:18,w:1},
    {x:6,y:19,w:1},
    {x:57,y:19,w:1},
    {x:6,y:20,w:1},
    {x:57,y:20,w:1},
    {x:6,y:21,w:1},
    {x:57,y:21,w:1},
    {x:6,y:22,w:1},
    {x:57,y:22,w:1},
    {x:6,y:23,w:1},
    {x:57,y:23,w:1}
  ]}
  ];

  // Tail sprite data
  const TAIL_GROUPS = [
    { c: "#f0b34d", runs: [
      {x:0,y:30,w:3}, {x:1,y:31,w:4}, {x:2,y:32,w:5}, {x:2,y:33,w:6},
      {x:3,y:34,w:6}, {x:3,y:35,w:7}, {x:4,y:36,w:7}, {x:4,y:37,w:6},
      {x:3,y:38,w:6}, {x:2,y:39,w:5}, {x:1,y:40,w:4}, {x:0,y:41,w:3}
    ]},
    { c: "#fcc436", runs: [
      {x:1,y:30,w:2}, {x:2,y:31,w:3}, {x:3,y:32,w:4}, {x:4,y:33,w:4},
      {x:5,y:34,w:4}, {x:6,y:35,w:3}, {x:7,y:36,w:2}
    ]},
  ];

  // Expression-based eye modifications
  const getEyeOverrides = () => {
    const overrides = [];

    if (expression === "sleepy") {
      // Half-closed eyes (horizontal lines)
      overrides.push(
        { c: "#251915", runs: [{x:10,y:17,w:6}, {x:32,y:17,w:6}] }
      );
    } else if (expression === "happy") {
      // Curved happy eyes (arcs)
      overrides.push(
        { c: "#251915", runs: [
          {x:10,y:18,w:2}, {x:14,y:18,w:2}, {x:32,y:18,w:2}, {x:36,y:18,w:2},
          {x:11,y:19,w:4}, {x:33,y:19,w:4}
        ] }
      );
    } else if (expression === "surprised") {
      // Wide open eyes
      overrides.push(
        { c: "#FFFFFF", runs: [
          {x:9,y:15,w:8}, {x:9,y:16,w:8}, {x:9,y:17,w:8}, {x:9,y:18,w:8},
          {x:31,y:15,w:8}, {x:31,y:16,w:8}, {x:31,y:17,w:8}, {x:31,y:18,w:8}
        ]},
        { c: "#5C4033", runs: [
          {x:11,y:16,w:4}, {x:11,y:17,w:4}, {x:33,y:16,w:4}, {x:33,y:17,w:4}
        ]}
      );
    } else if (expression === "excited") {
      // Star eyes!
      overrides.push(
        { c: "#FFD700", runs: [
          {x:12,y:15,w:2}, {x:11,y:16,w:4}, {x:12,y:17,w:2}, {x:10,y:17,w:1}, {x:15,y:17,w:1},
          {x:34,y:15,w:2}, {x:33,y:16,w:4}, {x:34,y:17,w:2}, {x:32,y:17,w:1}, {x:37,y:17,w:1}
        ]}
      );
    }

    return overrides;
  };

  const width = W * pixelSize;
  const height = H * pixelSize;
  const eyeOverrides = getEyeOverrides();

  return (
    <>
      {/* Tail */}
      {showTail && (
        <svg
          viewBox="0 0 12 64"
          width={12 * pixelSize}
          height={64 * pixelSize}
          shapeRendering={crisp ? "crispEdges" : "auto"}
          style={{
            position: 'absolute',
            left: '-20px',
            top: 0,
            transformOrigin: 'right center',
            animation: tailWag ? 'tail-wag 0.6s ease-in-out infinite' : 'none',
          }}
          xmlns="http://www.w3.org/2000/svg"
        >
          {TAIL_GROUPS.map((g, gi) => (
            <g key={gi} fill={g.c}>
              {g.runs.map((r, ri) => (
                <rect key={ri} x={r.x} y={r.y} width={r.w} height={1} />
              ))}
            </g>
          ))}
        </svg>
      )}

      {/* Main body */}
      <svg
        viewBox={`0 0 ${W} ${H}`}
        width={width}
        height={height}
        shapeRendering={crisp ? "crispEdges" : "auto"}
        xmlns="http://www.w3.org/2000/svg"
        role="img"
        aria-label="Crumpet pixel sprite (high detail)"
        className={className}
        style={{
          display: 'block',
          animation: earTwitch ? 'ear-twitch 2s ease-in-out infinite' : 'none',
        }}
      >
      {dropShadow ? (
        <defs>
          <filter id="ds" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="1" stdDeviation="0.4" floodOpacity="0.25" />
          </filter>
        </defs>
      ) : null}

      {background !== "transparent" ? (
        <rect x={0} y={0} width={W} height={H} fill={background} />
      ) : null}

      <g filter={dropShadow ? "url(#ds)" : undefined}>
        {GROUPS.map((g, gi) => (
          <g key={gi} fill={g.c}>
            {g.runs.map((r, ri) => (
              <rect key={ri} x={r.x} y={r.y} width={r.w} height={1} />
            ))}
          </g>
        ))}
        {/* Expression overlays */}
        {eyeOverrides.map((g, gi) => (
          <g key={`override-${gi}`} fill={g.c}>
            {g.runs.map((r, ri) => (
              <rect key={ri} x={r.x} y={r.y} width={r.w} height={1} />
            ))}
          </g>
        ))}
      </g>
    </svg>
    </>
  );
}
