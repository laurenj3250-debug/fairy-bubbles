#!/usr/bin/env sh

echo "ğŸ” Running pre-push checks..."

# 1. TypeScript check
echo "ğŸ“ Checking TypeScript..."
npm run check || {
  echo "âŒ TypeScript errors found. Fix them before pushing."
  exit 1
}

# 2. Build check
echo "ğŸ—ï¸  Testing production build..."
npm run build || {
  echo "âŒ Build failed. Fix build errors before pushing."
  exit 1
}

# 3. Playwright visual tests (with screenshots)
echo "ğŸ“¸ Running visual tests with Playwright..."
npm run test || {
  echo "âš ï¸  Playwright tests failed. Check test-results/ for screenshots."
  echo "   Review screenshots before pushing to see what's broken."
  exit 1
}

# 4. Design review (optional - can comment out if too slow)
# echo "ğŸ¨ Running design review..."
# /design-review || {
#   echo "âš ï¸  Design issues found. Review and fix before pushing."
# }

echo "âœ… All pre-push checks passed!"
echo "ğŸ“¸ Playwright screenshots saved in test-results/"
